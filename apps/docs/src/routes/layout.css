@import "tailwindcss";
@source "../../../../packages/motion-core/**/*.{svelte,js,ts}";

@custom-variant light (html:not(.dark) &);

@font-face {
	font-family: "Haffer";
	src: url("/fonts/Haffer-VF.woff2") format("woff2");
	font-weight: 100 1000;
	font-style: normal;
	font-display: swap;
}

:root {
	--base-hue: 285;
	--color-fixed-dark: oklch(0.18 0.0044 var(--base-hue));
	--color-fixed-light: oklch(0.95 0.0013 var(--base-hue));
	--color-background: oklch(0.9542 0.002 var(--base-hue));
	--color-foreground: oklch(0.2408 0.0044 var(--base-hue));
	--color-accent: oklch(0.6996 0.201959 44.4414);
	--color-accent-secondary: oklch(0.5096 0.151959 44.4414);
	--color-border: oklch(0.9225 0.002 var(--base-hue));
	--color-card: oklch(1 0 0);
	--color-card-muted: oklch(0.9642 0.002 var(--base-hue));
	--shadow-xs: 0px 1px 1px -0.5px rgba(0, 0, 0, 0.15);
	--shadow-sm:
		0px 1px 1px -0.5px rgba(0, 0, 0, 0.15),
		0px 3px 3px -1.5px rgba(0, 0, 0, 0.05);
	--shadow-md:
		0px 1px 1px -0.5px rgba(0, 0, 0, 0.15),
		0px 3px 3px -1.5px rgba(0, 0, 0, 0.05), 0px 6px 6px -3px rgba(0, 0, 0, 0.05);
	--shadow-lg:
		0px 1px 1px -0.5px rgba(0, 0, 0, 0.15),
		0px 3px 3px -1.5px rgba(0, 0, 0, 0.05),
		0px 6px 6px -3px rgba(0, 0, 0, 0.05), 0px 12px 12px -6px rgba(0, 0, 0, 0.05);
	--shadow-xl:
		0px 1px 1px -0.5px rgba(0, 0, 0, 0.15),
		0px 3px 3px -1.5px rgba(0, 0, 0, 0.05),
		0px 6px 6px -3px rgba(0, 0, 0, 0.05),
		0px 12px 12px -6px rgba(0, 0, 0, 0.05),
		0px 24px 24px -12px rgba(0, 0, 0, 0.05);
	--shadow-2xl:
		0px 1px 1px -0.5px rgba(0, 0, 0, 0.15),
		0px 3px 3px -1.5px rgba(0, 0, 0, 0.05),
		0px 6px 6px -3px rgba(0, 0, 0, 0.05),
		0px 12px 12px -6px rgba(0, 0, 0, 0.05),
		0px 24px 24px -12px rgba(0, 0, 0, 0.05),
		0px 48px 48px -24px rgba(0, 0, 0, 0.05);
}

.dark {
	--color-background: oklch(0.18 0.0044 var(--base-hue));
	--color-foreground: oklch(0.95 0.0013 var(--base-hue));
	--color-border: oklch(0.28 0.01 var(--base-hue));
	--color-card: oklch(0.21 0.0065 var(--base-hue));
	--color-card-muted: oklch(0.26 0.0085 var(--base-hue));
	--card-highlight: oklch(0.928 0.01 var(--base-hue) / 0.1);
	--input-highlight: oklch(0.928 0.01 var(--base-hue) / 0.2);
}

@theme {
	--font-sans: "Haffer";
	--mono: "HafferMono";
	--color-fixed-dark: var(--fixed-dark);
	--color-fixed-light: var(--fixed-light);
	--color-background: var(--background);
	--color-foreground: var(--foreground);
	--color-accent: var(--accent);
	--color-accent-secondary: var(--accent-secondary);
	--color-border: var(--border);
	--color-card: var(--card);
	--color-card-muted: var(--card-muted);
	--card-highlight: var(--card-highlight);
	--shadow-xs: var(--shadow-xs);
	--shadow-sm: var(--shadow-sm);
	--shadow: var(--shadow);
	--shadow-md: var(--shadow-md);
	--shadow-lg: var(--shadow-lg);
	--shadow-xl: var(--shadow-xl);
	--shadow-2xl: var(--shadow-2xl);
}

@utility card-highlight {
	isolation: isolate;
	overflow: hidden;
	color: var(--color-foreground);

	box-shadow:
		inset 0 1px 0 color-mix(in oklab, var(--color-background) 78%, transparent),
		inset 0 -1px 0 color-mix(in oklab, var(--color-border) 36%, transparent),
		var(--shadow-sm),
		var(--shadow-lg);

	&::after {
		content: "";
		position: absolute;
		inset: 0;
		border-radius: inherit;
		pointer-events: none;
		border: 1.5px solid transparent;
		-webkit-mask:
			linear-gradient(black, black) padding-box,
			linear-gradient(black, black);
		mask:
			linear-gradient(black, black) padding-box,
			linear-gradient(black, black);
		-webkit-mask-composite: xor;
		mask-composite: exclude;
		background: linear-gradient(
				180deg,
				color-mix(in oklab, var(--color-background) 95%, transparent),
				color-mix(in oklab, var(--color-border) 55%, transparent) 41%,
				color-mix(in oklab, var(--color-border) 44%, transparent) 75%,
				color-mix(in oklab, var(--color-background) 78%, transparent)
			)
			border-box;
		opacity: 0.9;
	}
}

.dark .card-highlight {
	box-shadow:
		inset 0 1px 0 color-mix(in oklab, var(--color-background) 52%, transparent),
		inset 0 -1px 0 color-mix(in oklab, var(--color-border) 32%, transparent),
		var(--shadow-sm),
		var(--shadow-xl);
}

@utility input-highlight {
	isolation: isolate;

	&::before {
		content: "";
		position: absolute;
		inset: 0px;
		border-radius: inherit;
		pointer-events: none;
		z-index: -1;
	}

	@variant dark {
		&::before {
			box-shadow:
				inset 0 0.5px 0 0 rgba(0, 0, 0, 0.5),
				inset 0 -0.5px 0 0 var(--input-highlight);
		}
	}

	@variant light {
		&::before {
			border: 1px solid var(--color-border);
		}
	}
}

@layer base {
	body {
		@apply bg-card font-sans text-foreground;
		font-feature-settings: "ss01";
	}
}

@utility font-display {
	font-variation-settings: "XHGT" 100;
}

@utility mono {
	font-variation-settings: "MONO" 100;
}

::selection {
	@apply bg-accent text-white;
}

*:focus-visible {
	outline: 2px solid #ff6900;
	outline-offset: 0px;
}

::view-transition-old(root),
::view-transition-new(root) {
	animation-duration: 600ms;
	animation-timing-function: cubic-bezier(0.625, 0.05, 0, 1);
}

::view-transition-old(root) {
	animation-name: vt-fade-out;
}
::view-transition-new(root) {
	animation-name: vt-fade-in;
}

@keyframes vt-fade-out {
	to {
		opacity: 0;
	}
}
@keyframes vt-fade-in {
	from {
		opacity: 0;
	}
}

.btn-primary,
.btn-secondary {
	position: relative;
	appearance: none;
}

.btn-primary {
	overflow: hidden;
	color: var(--color-card);
	transition:
		filter 150ms ease-out,
		box-shadow 150ms ease-out;
	background:
		radial-gradient(
			ellipse at -20px top,
			rgb(255 255 255 / 0.22),
			rgb(255 255 255 / 0)
		),
		linear-gradient(180deg, var(--color-accent), var(--color-accent-secondary));
	box-shadow:
		inset 0 1px 0 rgb(255 255 255 / 0.22),
		var(--shadow-sm),
		var(--shadow-lg);

	&::after {
		content: "";
		position: absolute;
		inset: 0;
		border-radius: inherit;
		pointer-events: none;
		border: 1.5px solid transparent;
		-webkit-mask:
			linear-gradient(black, black) padding-box,
			linear-gradient(black, black);
		mask:
			linear-gradient(black, black) padding-box,
			linear-gradient(black, black);
		-webkit-mask-composite: xor;
		mask-composite: exclude;
		background: linear-gradient(
				180deg,
				rgb(255 255 255 / 0.72),
				rgb(0 0 0 / 0.24) 41%,
				rgb(0 0 0 / 0.24) 75%,
				rgb(255 255 255 / 0.28)
			)
			border-box;
		mix-blend-mode: overlay;
	}

	@media (hover: hover) {
		&:hover {
			filter: brightness(1.08) saturate(1.04);
		}
	}
}

.dark .btn-primary {
	color: var(--color-foreground);
	text-shadow: 0 -1px 0 rgb(0 0 0 / 0.45);
	background:
		radial-gradient(
			ellipse at -20px top,
			rgb(255 255 255 / 0.08),
			rgb(255 255 255 / 0)
		),
		linear-gradient(
			180deg,
			color-mix(in oklab, var(--color-accent) 70%, var(--color-card) 30%),
			color-mix(
				in oklab,
				var(--color-accent-secondary) 60%,
				var(--color-card) 40%
			)
		);
	box-shadow:
		inset 0 1px 0 rgb(255 255 255 / 0.08),
		var(--shadow-sm),
		var(--shadow-xl);

	@media (hover: hover) {
		&:hover {
			filter: brightness(1.12) saturate(1.05);
		}
	}
}

.btn-secondary {
	isolation: isolate;
	overflow: hidden;
	color: var(--color-foreground);
	transition:
		filter 150ms ease-out,
		box-shadow 150ms ease-out;
	background:
		radial-gradient(
			120% 140% at 0% 0%,
			color-mix(in oklab, var(--color-background) 85%, transparent),
			transparent 58%
		),
		linear-gradient(
			180deg,
			color-mix(in oklab, var(--color-card) 94%, var(--color-background) 6%),
			color-mix(
				in oklab,
				var(--color-card-muted) 90%,
				var(--color-background) 10%
			)
		);
	box-shadow:
		inset 0 1px 0 color-mix(in oklab, var(--color-background) 78%, transparent),
		inset 0 -1px 0 color-mix(in oklab, var(--color-border) 36%, transparent),
		var(--shadow-sm),
		var(--shadow-lg);

	&::after {
		content: "";
		position: absolute;
		inset: 0;
		border-radius: inherit;
		pointer-events: none;
		border: 1.5px solid transparent;
		-webkit-mask:
			linear-gradient(black, black) padding-box,
			linear-gradient(black, black);
		mask:
			linear-gradient(black, black) padding-box,
			linear-gradient(black, black);
		-webkit-mask-composite: xor;
		mask-composite: exclude;
		background: linear-gradient(
				180deg,
				color-mix(in oklab, var(--color-background) 95%, transparent),
				color-mix(in oklab, var(--color-border) 55%, transparent) 41%,
				color-mix(in oklab, var(--color-border) 44%, transparent) 75%,
				color-mix(in oklab, var(--color-background) 78%, transparent)
			)
			border-box;
		opacity: 0.9;
	}

	@media (hover: hover) {
		&:hover {
			filter: brightness(1.07);
			box-shadow:
				inset 0 1px 0
					color-mix(in oklab, var(--color-background) 85%, transparent),
				inset 0 -1px 0 color-mix(in oklab, var(--color-border) 42%, transparent),
				var(--shadow-sm),
				var(--shadow-xl);
		}
	}
}

.dark .btn-secondary {
	background:
		radial-gradient(
			120% 140% at 0% 0%,
			color-mix(in oklab, var(--color-background) 72%, transparent),
			transparent 58%
		),
		linear-gradient(
			180deg,
			color-mix(in oklab, var(--color-card) 94%, var(--color-background) 6%),
			color-mix(
				in oklab,
				var(--color-card-muted) 86%,
				var(--color-background) 14%
			)
		);
	box-shadow:
		inset 0 1px 0 color-mix(in oklab, var(--color-background) 52%, transparent),
		inset 0 -1px 0 color-mix(in oklab, var(--color-border) 32%, transparent),
		var(--shadow-sm),
		var(--shadow-xl);

	@media (hover: hover) {
		&:hover {
			filter: brightness(1.12);
			box-shadow:
				inset 0 1px 0
					color-mix(in oklab, var(--color-background) 62%, transparent),
				inset 0 -1px 0 color-mix(in oklab, var(--color-border) 40%, transparent),
				var(--shadow-sm),
				var(--shadow-2xl);
		}
	}
}
